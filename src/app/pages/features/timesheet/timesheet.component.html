<!-- <nb-card>
    <nb-card-header>
      Asset Information
    </nb-card-header>
  
    <nb-card-body> -->
<div class="row">
  <div class="col-md-12 col-lg-12">
    <nb-card size="large">
      <nb-tabset>
        <nb-tab tabTitle="Asset Information">
          <div class="row mb-4">
            <div class="col-12">
              <!-- Accordion for Sponsored By, Designation, Passport Information, and Asset Details -->
              <nb-accordion>
                <!-- Asset Details Accordion (Open by Default) -->
                <nb-accordion-item [expanded]="true">
                  <nb-accordion-item-header>
                    <h5 class="mb-0 fw-bold" style="font-size: 1.25rem; color: #004B87;">
                      <nb-icon icon="briefcase-outline" class="me-2"></nb-icon> Asset Details
                    </h5>
                  </nb-accordion-item-header>
                  <nb-accordion-item-body>
                    <div class="row g-3">
                
                      <div class="col-md-4 col-sm-12 mb-3" *ngFor="let field of [
                        { label: 'Name', value: assetData?.name },
                        { label: 'ID Number', value: assetData?.idNumber },
                        { label: 'Iqama Expiry', value: assetData?.iqamaExpiry },
                        { label: 'Phone', value: assetData?.phone },
                        { label: 'Joining Date', value: assetData?.joiningDate },
                        { label: 'Asset Type', value: assetData?.assetType },
                        { label: 'Asset Number', value: assetData?.assetNumber },
                        { label: 'Asset Ownership', value: assetData?.assetOwnership },
                        { label: 'Designation', value: assetData?.designation?.name }
                      ]">
                        <label class="fw-bold text-muted mb-1">{{ field.label }}</label>
                        <div class="text-dark">
                          {{ field.value || '-' }}
                        </div>
                      </div>
                
                    </div>
                  </nb-accordion-item-body>
                </nb-accordion-item>
                

                <!-- Sponsored By Accordion -->
                <!-- <nb-accordion-item>
                  <nb-accordion-item-header>
                    <h5 class="mb-0 fw-bold" style="font-size: 1.25rem; color: #004B87;">
                      <nb-icon icon="home-outline" class="me-2"></nb-icon> Sponsored By
                    </h5>
                  </nb-accordion-item-header>
                  <nb-accordion-item-body>
                    <div class="row g-3">
                      <div class="col-md-4 col-sm-12 mb-3">
                        <label for="sponsoredBy" class="fw-bold text-muted d-flex align-items-center">
                          <nb-icon icon="home-outline" class="me-2 mr-2"></nb-icon> Sponsored By
                        </label>
                        <input type="text" id="sponsoredBy" class="form-control" [value]="assetData?.sponsoredName"
                          disabled style="background-color: white;">
                      </div>
                      <div class="col-md-4 col-sm-12 mb-3">
                        <label for="sponsorshipType" class="fw-bold text-muted d-flex align-items-center">
                          <nb-icon icon="briefcase-outline" class="me-2 mr-2"></nb-icon> Sponsorship Type
                        </label>
                        <input type="text" id="sponsorshipType" class="form-control"
                          [value]="assetData?.sponsorshipType" disabled style="background-color: white;">
                      </div>
                      <div class="col-md-4 col-sm-12 mb-3">
                        <label for="sponsorshipValue" class="fw-bold text-muted d-flex align-items-center">
                          <nb-icon icon="pricetag-outline" class="me-2 mr-2"></nb-icon> Sponsorship Value
                        </label>
                        <input type="text" id="sponsorshipValue" class="form-control"
                          [value]="assetData?.sponsorshipValue" disabled style="background-color: white;">
                      </div>
                    </div>
                

                    <button nbButton  status="info" (click)="goToAnotherPage()">
                      <nb-icon icon="plus-outline"></nb-icon> Sponsor
                    </button>
                
                  </nb-accordion-item-body>
                </nb-accordion-item> -->
                

                <!-- Other Accordion Items (e.g., Designation, Passport Information) -->
                <!-- <nb-accordion-item>
                  <nb-accordion-item-header>
                    <h5 class="mb-0 fw-bold" style="font-size: 1.25rem; color: #004B87;">
                      <nb-icon icon="briefcase-outline" class="me-2"></nb-icon> Designation
                    </h5>
                  </nb-accordion-item-header>
                  <nb-accordion-item-body>
                    <div class="row g-3">
                      <div class="col-md-4 col-sm-12 mb-3">
                        <label for="designation" class="fw-bold text-muted d-flex align-items-center">
                          <nb-icon icon="briefcase-outline" class="me-2 mr-2"></nb-icon> Designation
                        </label>
                        <input type="text" id="designation" class="form-control" [value]="assetData?.designation?.name"
                          disabled style="background-color: white;">
                      </div>
                    </div>
                  </nb-accordion-item-body>
                </nb-accordion-item> -->

                <!-- Passport Information Accordion -->
                <!-- <nb-accordion-item>
                  <nb-accordion-item-header>
                    <h5 class="mb-0 fw-bold" style="font-size: 1.25rem; color: #004B87;">
                      <nb-icon icon="clipboard-outline" class="me-2"></nb-icon> Passport Information
                    </h5>
                  </nb-accordion-item-header>
                  <nb-accordion-item-body>
                    <div class="row g-3">
                      <div class="col-md-4 col-sm-12 mb-3">
                        <label for="passport" class="fw-bold text-muted d-flex align-items-center">
                          <nb-icon icon="clipboard-outline" class="me-2 mr-2"></nb-icon> Passport
                        </label>
                        <input type="text" id="passport" class="form-control" [value]="assetData?.passport" disabled
                          style="background-color: white;">
                      </div>
                      <div class="col-md-4 col-sm-12 mb-3">
                        <label for="passportExpiry" class="fw-bold text-muted d-flex align-items-center">
                          <nb-icon icon="calendar-outline" class="me-2 mr-2"></nb-icon> Passport Expiry
                        </label>
                        <input type="text" id="passportExpiry" class="form-control" [value]="assetData?.passportExpiry"
                          disabled style="background-color: white;">
                      </div>
                    </div>
                  </nb-accordion-item-body>
                </nb-accordion-item> -->
              </nb-accordion>
            </div>
          </div>

        </nb-tab>
        <nb-tab tabTitle="Projects">
          <ng2-smart-table [settings]="settingsProjects" [source]="sourceProjects"
            (createConfirm)="onProjectCreateConfirm($event)" (editConfirm)="onProjectEditConfirm($event)"
            (deleteConfirm)="onProjectDeleteConfirm($event)">
          </ng2-smart-table>
        </nb-tab>
        <nb-tab tabTitle="Timesheet">
          <!-- Styled Timesheet Filters -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="filter-section card shadow-sm border-0">
                <div class="card-header p-3">
                  <h4 class="mb-0 d-flex align-items-center">
                    <nb-icon icon="calendar-outline" class="me-2 mr-3"></nb-icon> Timesheet Filters
                  </h4>
                </div>
                <div class="card-body">
                  <div class="row align-items-end g-3">

                    <!-- Month Selection -->
                    <div class="col-md-4 col-sm-12 mb-3">
                      <label for="monthSelect" class="fw-bold text-muted d-flex align-items-center">
                        <nb-icon icon="calendar-outline" class="me-2 mr-2"></nb-icon> Select Month
                      </label>
                      <select id="monthSelect" class="form-control" [(ngModel)]="selectedMonth">
                        <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
                      </select>
                    </div>

                    <!-- Year Selection -->
                    <div class="col-md-4 col-sm-12 mb-3">
                      <label for="yearSelect" class="fw-bold text-muted d-flex align-items-center">
                        <nb-icon icon="clock-outline" class="me-2 mr-2"></nb-icon> Select Year
                      </label>
                      <select id="yearSelect" class="form-control" [(ngModel)]="selectedYear">
                        <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                      </select>
                    </div>

                    <!-- Load Timesheet Button -->
                    <div class="col-md-4 col-sm-12 mb-3 text-center">
                      <button nbButton status="primary" class="w-100 fw-bold shadow-sm" (click)="loadSheet()">
                        Load Timesheet
                      </button>
                    </div>
                    

                  </div>
                </div>
              </div>
            </div>
          </div>


          <div *ngFor="let week of weeks">
            <!-- Card Header with Week Title and Icon -->
            <div class="filter-section card shadow-sm border-0 mb-4">
              <div class="card-header p-3 d-flex justify-content-between align-items-center">
                <h5 class="mb-0 d-flex align-items-center">
                  <nb-icon icon="calendar-outline" class="me-2 mr-3"></nb-icon>
                  {{ week.title }}
                </h5>
                <button nbButton status="success" outline size="small" (click)="addMoreRows(week)">
                  <nb-icon icon="plus-outline" class="me-1"></nb-icon> Add More
                </button>
              </div>
          
              <!-- Responsive Scrollable Table -->
              <div class="table-responsive">
                <table class="table table-bordered">
                  <thead class="">
                    <tr>
                      <th class="active-header">Name</th>
                      <th class="active-header">Type</th>
                      <th *ngFor="let day of week.days" [ngClass]="day.isDisabled ? 'disabled-header' : 'active-header'">
                        {{ day.date }}
                      </th>
                      <th class="active-header">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let row of week.rows; let i = index">
                      <tr>
                        <td class="active-field">
                          <select class="form-select form-control" [(ngModel)]="row.projectName" (change)="updateProjectSelection(row)">
                            <option *ngFor="let project of getProjects" [value]="project.projectId">{{ project?.projectName }}</option>
                          </select>
                        </td>
                        <td class="active-field">{{ row.rateType }}</td>
                        <td *ngFor="let day of week.days" [ngClass]="day.isDisabled ? 'disabled-field' : 'active-field'">
                          <input *ngIf="!day.isDisabled" type="number" min="0" [(ngModel)]="row.days[day.date]" class="form-control" (change)="updateTimesheet(row.id, row.rateType, day.date, row.days[day.date], row)">
                          <span *ngIf="day.isDisabled">--</span>
                        </td>
                        <td class="active-field">
                          <button nbButton status="danger" outline size="small" class="d-flex align-items-center gap-1" (click)="deleteRow(week, i)">
                            <nb-icon icon="trash-2-outline" class="me-1"></nb-icon> Delete
                          </button>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          
          
          
          
          <div class="d-flex justify-content-end" *ngIf="isTimeSheetSubmit">
            <button nbButton status="success" size="small" class="mt-2" (click)="submitTimeSheet()"
              [disabled]="timeSheetCollection.length === 0">
              <nb-icon icon="checkmark-circle-outline" class="me-1"></nb-icon> Submit Timesheet
            </button>

          </div>
        </nb-tab>



        <!-- <nb-tab tabTitle="Summary">
          <nb-card>
            <nb-card-header>Summery Information</nb-card-header>
            <nb-card-body>
              <input type="text" nbInput fullWidth fieldSize="large" placeholder="Total Calculation Here">
            </nb-card-body>
          </nb-card>
        </nb-tab>
        <nb-tab tabTitle="Expenses">
          <ng2-smart-table [settings]="settingsExpenses" [source]="sourceExpenses"
            (deleteConfirm)="onDeleteExpenseConfirm($event)"></ng2-smart-table>
        </nb-tab> -->
      </nb-tabset>
    </nb-card>
  </div>
</div>
<!-- </nb-card-body>
  </nb-card> -->